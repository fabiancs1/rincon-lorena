<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>El Rinc√≥n de Lorena</title>
<link rel="stylesheet" href="lore.css">
<style>
/* ‚îÄ‚îÄ INTRO ‚îÄ‚îÄ */
#intro {
  position: fixed; inset: 0; z-index: 1000;
  background: var(--bg);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 0; pointer-events: none;
}
#intro.out { animation: introOut 1.5s cubic-bezier(0.4,0,0.2,1) forwards; }
@keyframes introOut { to { opacity:0; transform:scale(1.05); } }

.i-rose {
  font-size: 5rem;
  filter: drop-shadow(0 0 40px rgba(200,96,127,0.6));
  animation: roseIn 1s cubic-bezier(0.34,1.56,0.64,1) forwards;
  opacity: 0;
}
@keyframes roseIn {
  from { opacity:0; transform:scale(0.1) rotate(-45deg); }
  to   { opacity:1; transform:scale(1)   rotate(0deg); }
}
.i-name {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2.4rem,10vw,5rem);
  font-style: italic; font-weight: 400;
  letter-spacing: 0.04em;
  background: linear-gradient(135deg, var(--rose2), var(--rose3), var(--gold2));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  margin-top: 18px;
  opacity: 0; animation: slideUp 0.9s ease forwards 0.65s;
}
.i-rule {
  width: 0; height: 1px; margin-top: 22px;
  background: linear-gradient(90deg, transparent, var(--gold2), transparent);
  animation: ruleGrow 0.8s ease forwards 1.2s;
}
@keyframes ruleGrow { to { width: 140px; } }
.i-sub {
  font-size: 0.72rem; letter-spacing: 0.28em;
  text-transform: uppercase; color: var(--muted);
  margin-top: 16px;
  opacity: 0; animation: slideUp 0.6s ease forwards 1.6s;
}
@keyframes slideUp {
  from { opacity:0; transform:translateY(14px); }
  to   { opacity:1; transform:translateY(0); }
}

/* ‚îÄ‚îÄ PETALS ‚îÄ‚îÄ */
#petals { position:fixed; inset:0; pointer-events:none; z-index:1; }

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero {
  position: relative; z-index: 2;
  display: flex; flex-direction: column;
  align-items: center; text-align: center;
  padding: 60px 24px 0;
}
.avatar-wrap {
  position: relative; width: 108px; height: 108px;
  opacity: 0; animation: fadeUp 0.7s ease forwards 2s;
}
.avatar-ring {
  position: absolute; inset: -3px;
  border-radius: 50%;
  background: conic-gradient(var(--deep-rose), var(--gold2), var(--rose2), var(--gold2), var(--deep-rose));
  animation: spin 8s linear infinite;
  filter: blur(0.5px);
}
@keyframes spin { to { transform: rotate(360deg); } }
.avatar-inner {
  position: relative; z-index: 1;
  width: 100%; height: 100%; border-radius: 50%;
  background: var(--surface2);
  border: 3px solid var(--bg);
  display: flex; align-items: center; justify-content: center;
  font-size: 2.5rem; overflow: hidden;
}
.avatar-inner img { width:100%; height:100%; object-fit:cover; }

.hero-eyebrow {
  font-size: 0.66rem; letter-spacing: 0.32em;
  text-transform: uppercase; color: var(--gold2);
  margin-top: 22px;
  opacity: 0; animation: fadeUp 0.5s ease forwards 2.15s;
}
.hero-name {
  font-family: 'Playfair Display', serif;
  font-size: clamp(3rem,8vw,5.5rem);
  font-weight: 400; line-height: 1; margin-top: 6px;
  opacity: 0; animation: fadeUp 0.6s ease forwards 2.25s;
}
.hero-name em {
  display: block; font-style: italic;
  background: linear-gradient(135deg, var(--rose2), var(--rose3) 60%, var(--gold2));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}

/* ‚îÄ‚îÄ COUNTER ‚îÄ‚îÄ */
.counter {
  display: inline-flex; gap: 0;
  margin-top: 28px;
  background: var(--surface);
  border: 1px solid var(--border-rose);
  border-radius: var(--r-xl);
  overflow: hidden;
  opacity: 0; animation: fadeUp 0.6s ease forwards 2.4s;
  box-shadow: 0 6px 40px rgba(0,0,0,0.4);
}
.c-item {
  padding: 16px 26px; text-align: center;
  position: relative;
}
.c-item + .c-item::before {
  content: '';
  position: absolute; left: 0; top: 20%; bottom: 20%;
  width: 1px;
  background: var(--border-rose);
}
.c-num {
  font-family: 'Playfair Display', serif;
  font-size: 2.1rem; line-height: 1;
  background: linear-gradient(135deg, var(--rose2), var(--gold2));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.c-lbl {
  font-size: 0.6rem; letter-spacing: 0.14em;
  text-transform: uppercase; color: var(--muted);
  margin-top: 4px;
}

/* ‚îÄ‚îÄ PHRASE ‚îÄ‚îÄ */
.phrase-section {
  position: relative; z-index: 2;
  max-width: 580px; width: 100%; margin: 32px auto 0;
  padding: 0 24px;
  opacity: 0; animation: fadeUp 0.6s ease forwards 2.55s;
}
.phrase-card {
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: var(--r-xl);
  padding: 28px 32px;
  text-align: center;
  position: relative; overflow: hidden;
  transition: border-color 0.3s;
}
.phrase-card:hover { border-color: var(--border); }
.phrase-card::before {
  content: '\201C';
  position: absolute; top: -20px; left: 14px;
  font-family: 'Playfair Display', serif;
  font-size: 9rem; line-height: 1;
  color: var(--rose); opacity: 0.04;
  pointer-events: none;
}
.phrase-card::after {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at 50% 0%, rgba(200,96,127,0.04), transparent 70%);
  pointer-events: none;
}
.phrase-eyebrow {
  font-size: 0.6rem; letter-spacing: 0.26em;
  text-transform: uppercase; color: var(--gold2);
  margin-bottom: 14px;
  display: flex; align-items: center; justify-content: center; gap: 10px;
}
.phrase-eyebrow::before, .phrase-eyebrow::after {
  content: ''; width: 28px; height: 1px;
  background: linear-gradient(90deg, transparent, var(--border));
}
.phrase-eyebrow::after {
  background: linear-gradient(90deg, var(--border), transparent);
}
.phrase-text {
  font-family: 'Playfair Display', serif;
  font-size: clamp(0.98rem,2.4vw,1.22rem);
  font-style: italic; line-height: 1.75;
  color: var(--cream2);
}

/* ‚îÄ‚îÄ SECTION LABEL ‚îÄ‚îÄ */
.main-label {
  position: relative; z-index: 2;
  display: flex; align-items: center; gap: 16px;
  max-width: 900px; margin: 42px auto 20px;
  padding: 0 24px;
  opacity: 0; animation: fadeUp 0.5s ease forwards 2.6s;
}
.main-label::before, .main-label::after {
  content: ''; flex: 1; height: 1px;
  background: linear-gradient(90deg, transparent, var(--border2));
}
.main-label::after { background: linear-gradient(90deg, var(--border2), transparent); }
.main-label span {
  font-size: 0.6rem; letter-spacing: 0.28em;
  text-transform: uppercase; color: var(--muted2);
  white-space: nowrap;
}

/* ‚îÄ‚îÄ GRID ‚îÄ‚îÄ */
.grid {
  position: relative; z-index: 2;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
  max-width: 900px; margin: 0 auto;
  padding: 0 24px 100px;
}
.gc {
  text-decoration: none; color: var(--cream);
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: var(--r-lg);
  padding: 28px 12px 22px;
  display: flex; flex-direction: column;
  align-items: center; gap: 11px;
  text-align: center; cursor: pointer;
  position: relative; overflow: hidden;
  opacity: 0; animation: fadeUp 0.5s ease forwards;
  transition: all 0.3s cubic-bezier(0.34,1.2,0.64,1);
}
/* inner glow overlay */
.gc::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(circle at 50% -10%, rgba(200,96,127,0.08), transparent 65%);
  opacity: 0; transition: opacity 0.3s; pointer-events: none;
}
.gc:hover::before { opacity: 1; }
/* bottom shimmer line */
.gc::after {
  content: ''; position: absolute;
  bottom: 0; left: 15%; right: 15%; height: 1px;
  background: linear-gradient(90deg, transparent, var(--rose), transparent);
  transform: scaleX(0); transition: transform 0.35s;
}
.gc:hover::after { transform: scaleX(1); }
.gc:hover {
  border-color: var(--border-rose);
  background: var(--surface2);
  transform: translateY(-7px);
  box-shadow: 0 22px 60px rgba(0,0,0,0.45), 0 0 0 1px rgba(200,96,127,0.1);
}
.gc-icon {
  font-size: 2rem;
  transition: transform 0.35s cubic-bezier(0.34,1.56,0.64,1);
  filter: drop-shadow(0 3px 8px rgba(0,0,0,0.35));
}
.gc:hover .gc-icon { transform: scale(1.22) translateY(-3px); }
.gc-name {
  font-family: 'Playfair Display', serif;
  font-size: 0.82rem; font-weight: 400;
  letter-spacing: 0.01em;
}
.gc-desc { font-size: 0.65rem; color: var(--muted); font-style: italic; }

/* special card */
.gc-special {
  background: linear-gradient(160deg, rgba(138,48,80,0.14), rgba(184,148,42,0.06));
  border-color: var(--border-rose);
}
.gc-special:hover {
  background: linear-gradient(160deg, rgba(138,48,80,0.22), rgba(184,148,42,0.1));
  border-color: rgba(200,96,127,0.35);
}

/* animation delays */
.gc:nth-child(1){animation-delay:2.65s}
.gc:nth-child(2){animation-delay:2.72s}
.gc:nth-child(3){animation-delay:2.79s}
.gc:nth-child(4){animation-delay:2.86s}
.gc:nth-child(5){animation-delay:2.93s}
.gc:nth-child(6){animation-delay:3.00s}
.gc:nth-child(7){animation-delay:3.07s}
.gc:nth-child(8){animation-delay:3.14s}

/* ‚îÄ‚îÄ CARTAS MODAL ‚îÄ‚îÄ */
.carta {
  background: var(--surface2);
  border: 1px solid var(--border2);
  border-radius: var(--r-md);
  padding: 20px 22px;
  cursor: pointer;
  transition: all 0.25s;
  position: relative; overflow: hidden;
}
.carta::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(200,96,127,0.04), transparent);
  opacity: 0; transition: opacity 0.25s; pointer-events: none;
}
.carta:hover { border-color: var(--border-rose); }
.carta:hover::before { opacity: 1; }
.carta-title {
  font-family: 'Playfair Display', serif;
  font-size: 0.95rem; font-style: italic;
}
.carta-date { font-size: 0.67rem; color: var(--gold2); margin-top: 4px; }
.carta-body {
  display: none;
  font-family: 'EB Garamond', serif;
  font-size: 0.95rem; line-height: 1.9;
  color: var(--cream2);
  margin-top: 16px; padding-top: 16px;
  border-top: 1px solid var(--border2);
  white-space: pre-wrap;
}
.carta-body.open { display: block; animation: fadeIn 0.3s ease; }
.carta-cta {
  font-size: 0.7rem; color: var(--rose2);
  font-style: italic; margin-top: 10px;
  display: inline-block; transition: color 0.2s;
}
.carta:hover .carta-cta { color: var(--rose3); }

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:680px) {
  .grid { grid-template-columns: repeat(4,1fr); gap: 9px; padding: 0 14px 90px; }
  .gc { padding: 20px 8px 16px; border-radius: var(--r-md); gap: 8px; }
  .gc-icon { font-size: 1.7rem; }
  .gc-name { font-size: 0.7rem; }
  .gc-desc { display: none; }
  .counter { flex-wrap: wrap; }
  .c-item { padding: 13px 18px; }
  .c-num { font-size: 1.75rem; }
}
@media(max-width:380px) {
  .grid { gap: 7px; padding: 0 12px 90px; }
  .gc { padding: 16px 6px 14px; }
  .gc-name { font-size: 0.62rem; }
}
</style>
</head>
<body>
<canvas id="petals"></canvas>
<div id="intro">
  <div class="i-rose">üåπ</div>
  <div class="i-name">Lorena</div>
  <div class="i-rule"></div>
  <div class="i-sub">Tu rinc√≥n especial te espera</div>
</div>

<header class="topbar">
  <a href="index.html" class="topbar-logo">Rinc√≥n de Lorena üåπ</a>
  <nav class="topbar-nav">
    <a href="biblioteca.html" class="nav-link">üìö<span class="nav-text"> Libros</span></a>
    <a href="videos.html" class="nav-link">üé¨<span class="nav-text"> Videos</span></a>
    <a href="musica.html" class="nav-link">üéµ<span class="nav-text"> M√∫sica</span></a>
    <a href="calendario.html" class="nav-link">üìÖ<span class="nav-text"> Agenda</span></a>
    <a href="diario.html" class="nav-link">üí≠<span class="nav-text"> Diario</span></a>
    <a href="album.html" class="nav-link">üñºÔ∏è<span class="nav-text"> √Ålbum</span></a>
    <a href="wishlist.html" class="nav-link">‚ú®<span class="nav-text"> Wishlist</span></a>
    <a href="mood.html" class="nav-link">üåô<span class="nav-text"> Mood</span></a>
  </nav>
</header>

<section class="hero">
  <div class="avatar-wrap">
    <div class="avatar-ring"></div>
    <div class="avatar-inner" id="avatarInner">üåπ</div>
  </div>
  <p class="hero-eyebrow" id="heroGreeting">Hola de nuevo,</p>
  <h1 class="hero-name">El Rinc√≥n de<em id="heroName">Lorena</em></h1>
  <div class="counter">
    <div class="c-item"><div class="c-num" id="cD">‚Äî</div><div class="c-lbl">d√≠as juntos</div></div>
    <div class="c-item"><div class="c-num" id="cM">‚Äî</div><div class="c-lbl">meses</div></div>
    <div class="c-item"><div class="c-num" id="cY">‚Äî</div><div class="c-lbl">a√±os</div></div>
  </div>
</section>

<div class="phrase-section">
  <div class="phrase-card">
    <div class="phrase-eyebrow">Frase del d√≠a</div>
    <p class="phrase-text" id="phraseText">Cargando...</p>
  </div>
</div>

<div class="main-label"><span>Tu espacio</span></div>

<div class="grid">
  <a href="biblioteca.html" class="gc"><div class="gc-icon">üìö</div><div class="gc-name">Biblioteca</div><div class="gc-desc">Tus libros</div></a>
  <a href="videos.html"    class="gc"><div class="gc-icon">üé¨</div><div class="gc-name">Videos</div><div class="gc-desc">TikToks y m√°s</div></a>
  <a href="musica.html"    class="gc"><div class="gc-icon">üéµ</div><div class="gc-name">M√∫sica</div><div class="gc-desc">Tus playlists</div></a>
  <a href="calendario.html" class="gc"><div class="gc-icon">üìÖ</div><div class="gc-name">Agenda</div><div class="gc-desc">Tus eventos</div></a>
  <a href="diario.html"    class="gc"><div class="gc-icon">üí≠</div><div class="gc-name">Diario</div><div class="gc-desc">Solo tuyo</div></a>
  <a href="album.html"     class="gc"><div class="gc-icon">üñºÔ∏è</div><div class="gc-name">√Ålbum</div><div class="gc-desc">Tus fotos</div></a>
  <a href="wishlist.html"  class="gc"><div class="gc-icon">‚ú®</div><div class="gc-name">Wishlist</div><div class="gc-desc">Tus deseos</div></a>
  <div class="gc gc-special" onclick="openCartas()"><div class="gc-icon">üíå</div><div class="gc-name">Cartitas</div><div class="gc-desc">De √©l para ti</div></div>
</div>

<!-- MODAL CARTAS -->
<div class="modal-bg" id="cartasModal">
  <div class="modal-box" style="max-width:540px">
    <button class="modal-close" onclick="closeCartas()">‚úï</button>
    <p class="modal-title">üíå Cartitas para ti</p>
    <p class="modal-sub">Toca cada una para leerla üåπ</p>
    <div style="display:flex;flex-direction:column;gap:12px;margin-top:8px" id="cartasList"></div>
  </div>
</div>

<script>
/* ‚îÄ‚îÄ PETALS ‚îÄ‚îÄ */
const cv = document.getElementById('petals');
const cx = cv.getContext('2d');
let pts = []; let pActive = true;
function resz(){ cv.width=innerWidth; cv.height=innerHeight; }
resz(); addEventListener('resize',resz);
function mkP(){
  const cols=['#c8607f','#b8942a','#e07898','#d4ae4a','#a04060','#e896b8'];
  return { x:Math.random()*cv.width, y:-25, sz:Math.random()*9+5,
    vy:Math.random()*1.1+0.4, vx:(Math.random()-.5)*.9,
    rot:Math.random()*Math.PI*2, drot:(Math.random()-.5)*.05,
    op:Math.random()*.4+.18, col:cols[Math.floor(Math.random()*cols.length)],
    w:Math.random()*Math.PI*2, dw:Math.random()*.025+.007 };
}
function drawP(p){
  cx.save(); cx.translate(p.x,p.y); cx.rotate(p.rot);
  cx.globalAlpha=p.op; cx.fillStyle=p.col;
  cx.beginPath(); cx.ellipse(0,0,p.sz*.4,p.sz,0,0,Math.PI*2);
  cx.fill(); cx.restore();
}
function loop(){
  cx.clearRect(0,0,cv.width,cv.height);
  if(pActive && pts.length<28 && Math.random()<.1) pts.push(mkP());
  pts=pts.filter(p=>p.y<cv.height+30&&p.op>.01);
  pts.forEach(p=>{
    p.y+=p.vy; p.w+=p.dw; p.x+=p.vx+Math.sin(p.w)*.5;
    p.rot+=p.drot; if(!pActive)p.op*=.993;
    drawP(p);
  });
  requestAnimationFrame(loop);
}
loop();

/* ‚îÄ‚îÄ INTRO ‚îÄ‚îÄ */
const shown = sessionStorage.getItem('lore_intro');
if(shown){ document.getElementById('intro').style.display='none'; pActive=false; }
else {
  sessionStorage.setItem('lore_intro','1');
  setTimeout(()=>{
    pActive=false;
    const el=document.getElementById('intro');
    el.classList.add('out');
    setTimeout(()=>el.style.display='none',1500);
  },2700);
}

/* ‚îÄ‚îÄ CONFIG ‚îÄ‚îÄ */
async function init(){
  try{
    const r=await fetch('config.json?'+Date.now());
    const c=await r.json();
    const n=c.nombre||'Lorena';
    document.getElementById('heroName').textContent=n;
    document.title=`Rinc√≥n de ${n}`;
    const h=new Date().getHours();
    document.getElementById('heroGreeting').textContent=h<12?'Buenos d√≠as,':h<18?'Buenas tardes,':'Buenas noches,';
    if(c.foto_perfil) document.getElementById('avatarInner').innerHTML=`<img src="${c.foto_perfil}" alt="${n}">`;
    if(c.fecha_inicio_relacion){
      const d=Math.floor((new Date()-new Date(c.fecha_inicio_relacion))/(864e5));
      document.getElementById('cD').textContent=d.toLocaleString();
      document.getElementById('cM').textContent=Math.floor(d/30.44);
      document.getElementById('cY').textContent=Math.floor(d/365.25);
    }
    if(c.frase_del_dia?.length){
      const dy=Math.floor((new Date()-new Date(new Date().getFullYear(),0,0))/864e5);
      document.getElementById('phraseText').textContent=c.frase_del_dia[dy%c.frase_del_dia.length];
    }
    window._cartas=c.cartas||[];
  }catch{ document.getElementById('phraseText').textContent='Eres lo mejor que me ha pasado üåπ'; }
}

/* ‚îÄ‚îÄ CARTAS ‚îÄ‚îÄ */
function openCartas(){
  const list=document.getElementById('cartasList');
  list.innerHTML=(window._cartas||[]).length
    ?(window._cartas||[]).map((c,i)=>`
      <div class="carta">
        <div class="carta-title">üíå ${c.titulo}</div>
        <div class="carta-date">${fmt(c.fecha)}</div>
        <div class="carta-body" id="cb${i}">${c.contenido}</div>
        <span class="carta-cta" onclick="tog(${i})">Leer carta ‚Üí</span>
      </div>`).join('')
    :'<p style="color:var(--muted);font-style:italic;text-align:center;padding:24px 0">Pronto habr√° cartitas aqu√≠ üåπ</p>';
  document.getElementById('cartasModal').classList.add('open');
  document.body.style.overflow='hidden';
}
function tog(i){
  const b=document.getElementById('cb'+i);
  const o=b.classList.toggle('open');
  b.nextElementSibling.textContent=o?'Cerrar ‚Üë':'Leer carta ‚Üí';
}
function closeCartas(){ document.getElementById('cartasModal').classList.remove('open'); document.body.style.overflow=''; }
document.getElementById('cartasModal').addEventListener('click',e=>{ if(e.target===document.getElementById('cartasModal'))closeCartas(); });
function fmt(s){ if(!s)return ''; return new Date(s+'T00:00:00').toLocaleDateString('es-ES',{day:'numeric',month:'long',year:'numeric'}); }

init();
</script>
</body>
</html>